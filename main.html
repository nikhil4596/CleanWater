<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Clean Water</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/styleExtra.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">

</head>
    <body>
        <nav class="navbar navbar-toggleable-md navbar-light bg-faded">
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand">Clean Water</a>
            <div  id="navbarNavDropdown" class="navbar-collapse collapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a data-target="#myModalReports" data-toggle="modal" class="dropdown-item nav-link" id="reportsList" href="#myModalReports">Reports</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Create Report
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a data-target="#myModalSource" data-toggle="modal" class="dropdown-item nav-link" id="sourceReport" href="#myModalSource">Water Source Report</a>
                            <a data-target="#myModalPurity" data-toggle="modal" class="dropdown-item nav-link" id="purityReport" href="#myModalPurity">Water Purity Report</a>
                            <a data-target="#myModalHistory" data-toggle="modal" class="dropdown-item nav-link" id="historicalReport" href="#myModalHistory">Water Historical Report</a>
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" id="descrp" href="#">Logged in as: </a>
                    </li>
                    <li class="nav-item">
                        <a data-target="#myModalEditProfile" data-toggle="modal" class="dropdown-item nav-link" id="editProfile" href="#myModalEditProfile">Edit Profile</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="logOut">Logout</a>
                    </li>
                </ul>
            </div>
        </nav>
    <!--Here are the modals for each action-->
        <!--Water Source-->
        <div class="modal" id="myModalSource">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Create Water Source Report</h4>
                        <button class="close" data-dismiss="modal">&times</button>
                    </div>
                    <div class="modal-body">
                        <form action="" method="">
                            <div class="form-group">
                                <label for="waterType">Water Type</label>
                                <select class="form-control" id="waterType">
                                    <option selected="selected">Bottled</option>
                                    <option>Well</option>
                                    <option>Lake</option>
                                    <option>Stream</option>
                                    <option>Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="waterCondition">Water Condition</label>
                                <select class="form-control" id="waterCondition">
                                    <option selected="selected">Treatable</option>
                                    <option>Potable</option>
                                    <option>Waste</option>
                                    <option>TreatableMuddy</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lat1">Enter the Latitude</label>
                                <input value="0" type="number" class="form-control" id="lat1"/>
                            </div>
                            <div class="form-group">
                                <label for="long1">Enter the Longitude</label>
                                <input value="0" type="number" class="form-control" id="long1"/>
                            </div>
                            <div class="form-group">
                                <input type="submit" class="btn btn-default" id="createSourceReport" value="Create Report"/>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!--Water Purity-->
        <div class="modal" id="myModalPurity">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Create Water Purity Report</h4>
                        <button class="close" data-dismiss="modal">&times</button>
                    </div>
                    <div class="modal-body">
                        <form action="" method="">
                            <div class="form-group">
                                <label for="waterCondition">Water Condition</label>
                                <select class="form-control" id="waterCondition2">
                                    <option selected="selected">Treatable</option>
                                    <option>Potable</option>
                                    <option>Waste</option>
                                    <option>TreatableMuddy</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="virusPPM">Virus PPM</label>
                                <input value="0" type="number" class="form-control" id="virusPPM"/>
                            </div>
                            <div class="form-group">
                                <label for="contaminantPPM">Contaminant PPM</label>
                                <input value="0" type="number" class="form-control" id="contaminantPPM"/>
                            </div>
                            <div class="form-group">
                                <label for="lat2">Enter the Latitude</label>
                                <input value="0" type="number" class="form-control" id="lat2"/>
                            </div>
                            <div class="form-group">
                                <label for="long2">Enter the Longitude</label>
                                <input value="0" type="number" class="form-control" id="long2"/>
                            </div>
                            <div class="form-group">
                                <input type="submit" class="btn btn-default" id="createPurityReport" value="Create Report"/>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!--Historical-->
        <div class="modal" id="myModalHistory">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Historical Report</h4>
                        <button class="close" onclick="closeHistoryGraph()">&times</button>
                    </div>
                    <div class="modal-body">
                        <form id="historyForm">
                            <div class="form-group">
                                <label for="year">Year</label>
                                <input class="form-control" type="number" min="1900" max="2099" step="1" id="year" value="2017" />
                            </div>
                            <div class="form-group">
                                <label for="ppm">Water Condition</label>
                                <select class="form-control" id="ppm">
                                    <option selected="selected">Virus</option>
                                    <option>Contaminant</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lat3">Enter the Latitude</label>
                                <input value="0" type="number" class="form-control" id="lat3"/>
                            </div>
                            <div class="form-group">
                                <label for="long3">Enter the Longitude</label>
                                <input value="0" type="number" class="form-control" id="long3"/>
                            </div>
                        </form>
                        <button class="btn btn-default" id="createGraph">Create Historical Report</button>
                        <div id="historyGraph" style="display: none">
                            <div class="container">
                                <div>
                                    <canvas id="canvas"></canvas>
                                </div>
                            </div>
                            <button class="btn btn-default" id="closeGraph" onclick="closeHistoryGraph()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--List of Reports-->
        <div class="modal" id="myModalReports">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">List of Report</h4>
                        <button class="close" data-dismiss="modal">&times</button>
                    </div>
                    <div class="modal-body" id="listOfReports">
                        <p>List of Reports</p>
                    </div>
                </div>
            </div>
        </div>
        <!--Edit the Profile-->
        <div class="modal" id="myModalEditProfile">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Edit Profile</h4>
                        <button class="close" data-dismiss="modal">&times</button>
                    </div>
                    <div class="modal-body">
                        <form action="">
                            <div class="form-group">
                                <label for="lat3">Edit Name</label>
                                <input type="text" class="form-control" id="editName"/>
                            </div>
                            <div class="form-group">
                                <label for="long3">Edit Address</label>
                                <input type="text" class="form-control" id="editAddress"/>
                            </div>
                            <div class="form-group">
                                <input type="submit" id="editProfileSubmit" class="btn btn-default" value="Save Changes"/>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!--Here is the map-->
        <div id="map"></div>
        <script>
            var reports = JSON.parse(sessionStorage.getItem('reports'));
            function initMap() {
                var uluru = {lat:0, lng: 0};
                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 3,
                    center: uluru
                });
                reports.forEach(function (item) {
                    var location = {lat:item.latitude, lng:item.longitude};
                    var marker = new google.maps.Marker({
                        position: location,
                        map: map
                    });
                });

                map.setMapTypeId(google.maps.MapTypeId.SATELLITE);
            }
//            function addMarker(lat, long) {
//                var marker = new google.maps.Marker({
//                    position: new google.maps.LatLng(lat, long),
//                    map: map
//                });
//            }

        </script>
        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgc8dGZf03PK9phXoRaLEJ09AN6CnJKQA&callback=initMap">
        </script>
        <!--Here are our scripts-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>
        <script src="js/app.js"></script>
        <script src="https://npmcdn.com/tether@1.2.4/dist/js/tether.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
    </body>
</html>